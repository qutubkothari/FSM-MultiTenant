# App Engine configuration for WhatsApp Summary Automation
runtime: nodejs20

service: whatsapp-cron

instance_class: F1

entrypoint: node cron-server.js

automatic_scaling:
  min_instances: 0
  max_instances: 1
  target_cpu_utilization: 0.65

env_variables:
  SUPABASE_URL: "https://ktvrffbccgxtaststlhw.supabase.co"
  SUPABASE_ANON_KEY: "sb_publishable_sNhpQ5W6i_KuIPcT6bjjnw_BcJwPljV"
  SAK_BASE_URL: "http://wapi.saksolution.com"
  # NOTE: Do not commit secrets here. Deploy scripts generate a secrets-filled YAML at deploy time.
  SAK_SESSION_ID: "__SAK_SESSION_ID__"
  SAK_API_KEY: "__SAK_API_KEY__"
  NODE_ENV: "production"

handlers:
- url: /cron/.*
  script: auto
  secure: always
  login: admin

- url: /.*
  script: auto
  secure: always
