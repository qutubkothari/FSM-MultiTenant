# Google Cloud App Engine Configuration
runtime: python312

# Environment Variables
env_variables:
  SAK_BASE_URL: "http://wapi.saksolution.com"
  SAK_SESSION_ID: "5f4ebac4-0527-407b-9ca1-6f7905664f23"
  SAK_API_KEY: "9b55751c94e728d824d19a60b4082fd9e45591c1141c1a185f3845fbe9f65f9d"
  INBOUND_SECRET: "DEH5253"
  WEBHOOK_SECRET: "9f10a8c499423e3e75edc954078068733c44b1857b82841512b102d81d92edc5d"
  PORT: "3005"

# Handlers for serving static files
handlers:
  # Service Worker
  - url: /sw.js
    static_files: dist-react/sw.js
    upload: dist-react/sw.js
    secure: always
    expiration: "0s"

  # Workbox files
  - url: /workbox-(.*)\.js
    static_files: dist-react/workbox-\1.js
    upload: dist-react/workbox-.*\.js
    secure: always

  # PWA files
  - url: /(manifest\.webmanifest|registerSW\.js)
    static_files: dist-react/\1
    upload: dist-react/(manifest\.webmanifest|registerSW\.js)
    secure: always


  # Static assets (JS, CSS, images)
  - url: /assets/(.*)
    static_files: dist-react/assets/\1
    upload: dist-react/assets/.*
    secure: always
    expiration: "7d"

  # Serve image files from dist-react root
  - url: /(.*\.svg)
    static_files: dist-react/\1
    upload: dist-react/.*\.svg
    secure: always
    expiration: "7d"
  - url: /(.*\.png)
    static_files: dist-react/\1
    upload: dist-react/.*\.png
    secure: always
    expiration: "7d"
  - url: /(.*\.jpe?g)
    static_files: dist-react/\1
    upload: dist-react/.*\.jpe?g
    secure: always
    expiration: "7d"

  # Root - serve React app
  - url: /
    static_files: dist-react/index.html
    upload: dist-react/index.html
    secure: always

  # All other routes - serve React app (for client-side routing)
  - url: /(.*)
    static_files: dist-react/index.html
    upload: dist-react/index.html
    secure: always

# Automatic scaling configuration
automatic_scaling:
  min_instances: 0
  max_instances: 1
